#!/usr/bin/bash
set -e -u

# actualizando las bases para evitar errores
pacman -Syy
pacman -S grub efibootmgr --noconfirm

# Mostrar las unidades disponibles para que el usuario seleccione dónde instalar GRUB
echo "===== Unidades disponibles para instalar GRUB ====="
lsblk -d -o NAME,SIZE,MODEL
echo
read -rp "Ingrese el nombre de la unidad (ejemplo: sda): " disk
GRUB_DISK="/dev/$disk"

# Instalar GRUB en la unidad seleccionada y generar la configuración inicial
grub-install "$GRUB_DISK"
grub-mkconfig -o /boot/grub/grub.cfg

# Reemplazar el archivo de configuración de GRUB
if [ -f /etc/default/grub ]; then
    rm /etc/default/grub
fi
mv ./grub_conf /etc/default/grub
grub-mkconfig -o /boot/grub/grub.cfg

chmod +x extras
#./extras
